<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <title>Configuring aerc for git via email</title>
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://drewdevault.com/blog/index.xml">
  <link rel="icon" type="image/png" href="/avatar.png">
  
  <link rel="stylesheet" href="/main.min.d007a22f956a425cfa3f96c70ba325efd0f789fa65d2e609314f66cbe89ef0de.css">
</head>


<h1>
  Configuring aerc for git via email
  <small>
    <span class="date">April 20, 2020</span>
    on
    <span class="site"><a href=".">Drew DeVault&#39;s blog</a></span>
  </small>
</h1>

<main>
  <article>
    <p>I use <a href="https://aerc-mail.org">aerc</a> as my email client (naturally — I
wrote it, after all), and I use <a href="https://git-send-email.io">git send-email</a> to
receive patches to many of my projects. I designed aerc specifically to be
productive for this workflow, but there are a few extra things that I use in my
personal aerc configuration that I thought were worth sharing briefly. This blog
post will be boring and clerical, feel free to skip it unless it&rsquo;s something
you&rsquo;re interested in.</p>
<p>When I want to review a patch, I first tell aerc to <code>:cd sources/&lt;that project&gt;</code>, then I open up the patch and give it a read. If it needs work, I&rsquo;ll
use &ldquo;rq&rdquo; (&ldquo;reply quoted&rdquo;), a keybinding which is available by default, to open
my editor with the patch pre-quoted to trim down and reply with feedback inline.
If it looks good, I use the first of my custom keybindings: &ldquo;ga&rdquo;, short for git
am. The entry in <code>~/.config/aerc/binds.conf</code> is:</p>
<pre><code>ga = :pipe -mb git am -3&lt;Enter&gt;
</code></pre><p>This pipes the entire message (-m, in case I&rsquo;m viewing a message part) into <code>git am -3</code> (-3 uses a three-way merge, in case of conflicts), in the background
(-b). Then I&rsquo;ll use C-t (ctrl-T), another keybinding which is included by
default, to open a terminal tab in that directory, where I can compile the code,
run the tests, and so on. When I&rsquo;m done, I use the &ldquo;gp&rdquo; keybinding to push the
changes:</p>
<pre><code>gp = :term git push&lt;Enter&gt;
</code></pre><p>This runs the command in a new terminal, so I can monitor the progress. Finally,
I like to reply to the patch, letting the contributor know their work was merged
and thanking them for the contribution. I have a keybinding for this, too:</p>
<pre><code>rt = :reply -Tthanks&lt;Enter&gt;
</code></pre><p>My &ldquo;thanks&rdquo; template is at <code>~/.config/aerc/templates/thanks</code> and looks like
this:</p>
<pre><code>Thanks!

{% raw %}
{{exec &quot;{ git remote get-url --push origin;
    git reflog -2 origin/master --pretty=format:%h; }
  | xargs printf 'To %s\n   %s..%s  master -&gt; master\n'&quot; &quot;&quot;}}
{% endraw %}
</code></pre><p>That git command prints a summary of the most recent push to master. The result
is that my editor is pre-filled with something like this:</p>
<pre><code>Thanks!

To git@git.sr.ht:~sircmpwn/builds.sr.ht
   7aabe74..191f4a0  master -&gt; master
</code></pre><p>I occasionally append a few lines asking questions about follow-up work or
clarifying the deployment schedule for the change.</p>

  </article>
</main>

<section class="comment">
  

  <p>
  Have a comment on one of my posts? Start a discussion in my public inbox by
  sending an email to
  <a href="mailto:~sircmpwn/public-inbox@lists.sr.ht">~sircmpwn/public-inbox@lists.sr.ht</a>
  [<a href="https://man.sr.ht/lists.sr.ht/etiquette.md">mailing list etiquette</a>]
</section>

<section class="webring">
  <h2>
    Articles from blogs I read
    <small class="attribution">
      Generated by
      <a href="https://git.sr.ht/~sircmpwn/openring">openring</a>
    </small>
  </h2>
  <section class="articles">
    
    <div class="article">
      <h4 class="title">
        <a href="https://emersion.fr/blog/2020/status-update-21/" target="_blank" rel="noopener">Status update, August 2020</a>
      </h4>
      <p class="summary">Hi! Regardless of the intense heat I’ve been exposed to this last month,
I’ve still been able to get some stuff done (although having to move out to
another room which isn’t right under the roof).
I’ve worked a lot on IRC-related projects. I’ve added a znc-i…</p>
      <small class="source">
        via <a href="https://emersion.fr/blog/">emersion</a>
      </small>
      <small class="date">2020-08-19 00:00:00 &#43;0200 &#43;0200</small>
    </div>
    
    <div class="article">
      <h4 class="title">
        <a href="https://sourcehut.org/blog/2020-08-16-whats-cooking-august-2020/" target="_blank" rel="noopener">What&#39;s cooking on Sourcehut? August 2020</a>
      </h4>
      <p class="summary">Another month passes and we find ourselves writing (or reading) this status
update on a quiet, rainy Sunday morning. Today our userbase numbers 16,683
members strong, up 580 from last month. Please extend a kind welcome to our new
colleagues! Thanks for read…</p>
      <small class="source">
        via <a href="https://sourcehut.org/blog/">Blogs on Sourcehut</a>
      </small>
      <small class="date">2020-08-16 00:00:00 &#43;0000 &#43;0000</small>
    </div>
    
    <div class="article">
      <h4 class="title">
        <a href="https://blog.golang.org/go1.15" target="_blank" rel="noopener">Go 1.15 is released</a>
      </h4>
      <p class="summary">
  
  
    
      
        Today the Go team is very happy to announce the release of Go 1.15. You can get it from the download page.
Some of the highlights include:

Substantial improvements to the Go linker
Improved allocation for small objects at high core coun…</p>
      <small class="source">
        via <a href="https://blog.golang.org/feed.atom">The Go Programming Language Blog</a>
      </small>
      <small class="date">2020-08-11 11:00:00 &#43;0000 &#43;0000</small>
    </div>
    
    <div class="article">
      <h4 class="title">
        <a href="https://100r.co/site/north_pacific_logbook.html" target="_blank" rel="noopener">North Pacific Logbook</a>
      </h4>
      <p class="summary">
The passage from Japan (Shimoda) to Canada (Victoria) took 51 days, and it was the hardest thing we&#39;ve ever done. We decided to keep a logbook, to better remember it and so it can help others who wish to make this trip.Continue Reading
  </p>
      <small class="source">
        via <a href="https://100r.co/">Hundred Rabbits</a>
      </small>
      <small class="date">2020-07-31 00:00:00 &#43;0000 GMT</small>
    </div>
    
  </section>
</section>


<footer>
  The content for this site is
  <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>.
  The <a href="https://git.sr.ht/~sircmpwn/drewdevault.com">code for this site</a>
  is <a href="https://opensource.org/licenses/MIT">MIT</a>.
</footer>

